<!doctype html>
<html lang="ru">
<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Dropdown-ui example</title>
    <script src="bundle/example.bundle.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/highlight.min.js"></script>
    <script>
        if (!window.attachEvent && window.addEventListener) {
            hljs.initHighlightingOnLoad();
        }
    </script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/8.6/styles/atelier-lakeside.light.min.css" />
    <link rel="stylesheet" href="bundle/example.bundle.css" />
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
    <!--[if lte IE 9 ]><style> .page__example-code, .page__example-code-title { display: none; } </style><![endif]-->
</head>
<body class="page">
    <div class="page__example">
        <div class="page__example-column page__example-column_left">
            <div class="page__example-text">
                <p><strong>Dropdown-ui</strong> – компонент выпадающего списка для выбора одного или более значений c ui интерфейсом в стиле vk.com</p>
                <p>Репозиторий с исходным кодом: <a href="//github.com/tavriaforever/dropdown-ui/" target="_blank">github.com/tavriaforever/dropdown-ui/</a></p>
                <p>Написан на native javascript, без использования сторонних фреймворков и библиотек, кроме webpack для сборки файлов и express сервер для разработки</p>
                <p>Поддерживает работу в современных браузерах Firefox, Yandex, Chrome Opera 12+ и IE8+</p>

                <p>Реализует следующие возможности:</p>
                <ul>
                    <li>отображение списка пунктов с изображением и без</li>
                    <li>автокомплит для фильтрации пунктов списка с учетом транслитерации текста и не правильной раскладки клавиатуры</li>
                    <li>запрос данных на сервер для фильтрации списка</li>
                    <li>выбор одного и более пункта сразу</li>
                    <li>функции обратного вызова на открытие/закрытие дропдауна и выбор пункта списка</li>
                    <li>поддержка отправки данных в форме, dropdown содержит input type="hidden" со значениями выбранных пунктов списка</li>
                </ul>

                <h3>Технические детали</h3>
                <p>Предпологается, что проект собирается с помощью билдера <a href="//webpack.github.io" target="_blank">webpack.github.io</a>,
                    который предоставляет возможность использовать для компонента и его зависимостей – модульную систему CommonJS</p>
                <p>Для разработки и просмотра примера используется связка node.js фреймворка <a href="//expressjs.com" target="_blank">express</a> и <a href="//github.com/webpack/webpack-dev-middleware" target="_blank">webpack-dev-middleware</a></p>

                <h3>Структура проекта:</h3>
                <ul>
                    <li><strong>example</strong> -> папка с файлами примера, используется для демонстрации и разработки</li>
                    <li>
                        <strong>src</strong> -> исходные файлы компонента
                        <ul>
                            <li><strong>images</strong> -> картинки для отображения элементов дропдауна</li>
                            <li>
                                <strong>modules</strong> -> набор модулей для работы компонента
                                <ul>
                                    <li><strong>dropdown.js</strong> -> Основной модуль, реализующий логику ui компонента</li>
                                    <li><strong>ajax.js</strong> -> Базовый модуль для Ajax запросов на сервер</li>
                                    <li><strong>classList.js</strong> -> Модуль для кроссбраузерной работой с css классами html элементов</li>
                                    <li><strong>events.js</strong> -> Модуль для кроссбраузерной подписки на DOM события</li>
                                    <li><strong>helpers.js</strong> -> Модуль с набором хелперов для работы с DOM нодами</li>
                                    <li><strong>polyfills.js</strong> -> Минимальный набор полифилов для поддержки ECMAScript 5 методов, которые необходимы для dropdown</li>
                                    <li><strong>smartFilter.js</strong> -> Модуль для умной фильтрации массивов данных с учетом передачи некорректного запроса: транслитерация и не правильняа раскладка клавиатуры</li>
                                    <li><strong>textTransfrom.js</strong> -> Модуль для трансформации текста при фильтрации массивов данных</li>
                                </ul>
                            </li>
                            <li><strong>styles</strong> -> набор стилей, разбитых на отдельные файлы-блоки по методологии БЭМ</li>
                        </ul>
                    </li>
                </ul>

                <h3>Как запустить пример локально:</h3>
                <p>1. Открываем папку example и просто локально запускаем index.html</p>
                <p>2. Необходимо наличие установленного node.js + npm! Для того, чтобы была возможность получать результаты фильтрации с сервера
                    и пересобирать билды скриптов и стилей, необходимо с помощью bash консоли перейти в директорию проекта и выполнить поочередно команды:<br>
                    npm install<br>
                    npm start
                </p>
                <p>После чего вы увидите в консоле сообщение о том, что на 3001 порту запустился сервер, открываем в браузере http://localhost:3001</p>
                <p>На каждое изменение исходных файлов webpack будет пересобирать билд и при перезагрузке страницы будут отображены изменения</p>


            </div>
        </div>
        <div class="page__example-column page__example-column_right">
            <p>1. Каждый пример включает в себя автокомплит фильтрации на клиенте</p>
            <p>2. Инициализация всех примеров находится в файле ./example/example.js</p>
            <div class="page__example-demo">
                <h2>Пример #1</h2>
                <ul>
                    <li>изображений для пунктов списка</li>
                    <li>кастомный placeholder</li>
                    <li>поиск на сервере по домену пользователя<br><strong>p.s.</strong> список доменов есть в файле ./example/server.js</li>
                </ul>
                <div class="dropdown-ui" data-dropdown-id="first"></div>
            </div>
            <div class="page__example-demo">
                <h2>Пример #2</h2>
                <ul>
                    <li>изображений для пунктов списка</li>
                    <li>мульти выбор пунктов</li>
                    <li>установлены значения атрибутов id и name для инпута </li>
                </ul>
                <div class="dropdown-ui" data-dropdown-id="second"></div>
            </div>
            <div class="page__example-demo">
                <h2>Пример #3</h2>
                <ul>
                    <li>без изображений для пунктов списка</li>
                    <li>мульти выбор пунктов</li>
                </ul>
                <div class="dropdown-ui" data-dropdown-id="third"></div>
            </div>
            <!--<div class="page__example-text">-->
                <h3 class="page__example-code-title">API компонента</h3>
                <div class="page__example-code">
                <pre>
                    <code>
    // 1. Наличие html элемента
    &lt;div class=&quot;dropdown-ui&quot; data-dropdown-id=&quot;first&quot;&gt;&lt;/div&gt;

    // 2. javascript + styles
    var Dropdown = require('../src/modules/dropdown.js'),
        dropdownStyles = require('../src/styles/dropdown.styl');

    var dropdown = new Dropdown({
        id: 'first', // ОБЯЗАТЕЛЬНО! указание значение атрибута data-dropdown-id в DOM дереве
        showImage: true, // показывать изображение пункта списка или нет
        multiSelect: true, // Выбор только одного или мульти выбор пунктов меню
        tabIndex: '1', // для установки табиндекса инпуту
        placeholder: 'Введите имя одного друга или его домен', // установка кастомного плейсхолдера
        inputName: 'user-value-name', // кастомное значение атрибута name
        inputId: 'user-value-id', // установка id инпуту
        server: { // данные для запроса на сервер
            method: 'POST',
            url: '/api/users',
            type: 'json',
            data: { field: { name: 'domain', lang: 'en' } }
        },
        onOpen: function () {
            // обработчик на открытие дропдауна
        },
        onClose: function () {
            // обработчик на закрытие дропдауна
        },
        onSelect: function (item) {
            // обработчик на выбор элемента
        },
        items: [
            { id: 1, title: 'Андрей Рогозов', addition: 'rogozov', image: 'images/rogozov.jpg' },
            { id: 2, title: 'Николай Ильченко', addition: 'tavriaforever', image: 'images/tavriaforever.jpg' },
            { id: 3, title: 'Татьяна Неземная', addition: 'ЕУФИМБ (КФ) \'14', image: 'images/nezemnaya.jpg' }
        ] // ОБЯЗАТЕЛЬНО! список пунктов
    });

    // Если нужно перезаполнить список:
    dropdown.fillList([
        { id: 4, title: 'Сергей Жиленков', addition: 'zila', image: 'images/zila.jpg' },
        { id: 5, title: 'Борис Сапак', addition: 'ЮФ НУБиП Украины "КАТУ" (бывш. ЮФ НАУ)', image: 'images/baklan.jpg' },
        { id: 6, title: 'Дарья Обер', addition: 'dasha', image: 'images/dasha.jpg' }
    ], true);
                    </code>
                </pre>
                </div>
            <!--</div>-->
        </div>
    </div>
</body>
</html>
